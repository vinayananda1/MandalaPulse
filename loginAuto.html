<script>
  // ğŸŒ¼ Extract username from URL parameter
  const urlParams = new URLSearchParams(window.location.search);
  const email = urlParams.get("user");
  const password = "auto"; // symbolic password or backend lookup

  if (email) {
    // ğŸ§˜ Invoke backend validation
    google.script.run.withSuccessHandler(function(response) {
      if (response.status === "âœ…") {
        const role = response.role;
        const username = response.name;
        const code = Date.now(); // symbolic invocation code

        // ğŸŒ Redirect to admin.html with lineage
        window.location.href = `admin.html?username=${username}&role=${role}&code=${code}`;
      } else {
        alert("ğŸ›‘ Auto-login failed: " + response.status);
      }
    }).validate(email, password);
  } else {
    alert("ğŸ›‘ No user parameter found in URL");
  }
</script>
